version: 2

sources:
  - name: lightning_step_census_admissions
    description: "Census and admission data from Lightning Step"
    database: raw_masked
    schema: ls_census_admissions_episode_lightning_step_oac
    tables:
      - name: table_admissions
        description: "Admissions information"
        columns: 
          - name: id_table_admissions
          - name: episode_id_table_admissions
          - name: mrn_table_admissions
          - name: program_table_admissions
          - name: fname_table_admissions
          - name: lname_table_admissions
          - name: datedischarge_table_admissions
          - name: dctype_table_admissions
          - name: dcreason_table_admissions
          - name: location_id_table_admissions
          - name: eie_table_admissions

      - name: table_census
        description: "Census information"
        columns: 
          - name: episode_id_table_census
          - name: payor_table_census
          - name: pricouns_table_census

      - name: table_users
        config:
          freshness:
            warn_after: {count: 48, period: hour}
            error_after: {count: 168, period: hour}
          loaded_at_field: updated_at_table_users
        description: User directory from EMR
        columns: 
          - name: email_table_users
          - name: id_table_users
          - name: isactive_table_users
          - name: name_table_users
          - name: role_table_users
          - name: title_table_users
          - name: updated_at_table_users
        
      - name: table_stafflocations
        config:
          freshness:
            warn_after: {count: 48, period: hour}
            error_after: {count: 168, period: hour}
          loaded_at_field: updated_at_table_stafflocations
        description: Staff â†” facility assignments
        columns: 
          - name: datedoc_table_stafflocations
          - name: id_table_stafflocations
          - name: isactive_table_stafflocations
          - name: isprimary_table_stafflocations
          - name: location_id_table_stafflocations
          - name: name_table_stafflocations
          - name: staff_id_table_stafflocations
          - name: updated_at_table_stafflocations

